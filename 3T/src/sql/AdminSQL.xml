<?xml version="1.0" encoding="euc-kr"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN'
	'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap>

	<!-- 관리자 상품 SQL ********************************************************************************************************************** -->
	<typeAlias alias="ad_goods" type="admin.goods.VO.GoodsVO" />

	<resultMap id="GoodsRes" class="ad_goods">
		<result property="goods_no" column="goods_no" />
		<result property="goods_name" column="goods_name" />
		<result property="goods_content" column="goods_content" />
		<result property="goods_readcnt" column="goods_readcnt" />
		<result property="goods_reg_date" column="goods_reg_date" />
		<result property="goods_color" column="goods_color" />
		<result property="goods_price" column="goods_price" />
		<result property="goods_size" column="goods_size" />
		<result property="goods_category" column="goods_category" />
		<result property="goods_recommend" column="goods_recommend" />
		<result property="goods_totalcount" column="goods_totalcount" />
		<result property="goods_related_product" column="goods_related_product" />
		<result property="goods_file_orgname" column="goods_file_orgname" />
		<result property="goods_file_savname" column="goods_file_savname" />


	</resultMap>

	<sql id="select-all">
		SELECT * FROM GOODS
	</sql>

	<!-- 공통으로 사용할 where-no 절 정의 -->
	<sql id="where-no">
		WHERE Goods_no = #goods_no#
	</sql>

	<select id="selectAll" resultMap="GoodsRes" parameterClass="int">
		<include refid="select-all" />

	</select>

	<select id="selectOne" resultMap="GoodsRes" parameterClass="int">
		<include refid="select-all" />
		<include refid="where-no" />
	</select>

	<select id="selectLastNo" resultClass="ad_goods" parameterClass="int">
		SELECT max(goods_no) as goods_no FROM GOODS
	</select>




	<insert id="insertGoods" parameterClass="ad_goods">
		INSERT INTO
		GOODS(goods_no,goods_name,goods_content,goods_readcnt,goods_reg_date,goods_color,
		goods_price,goods_size,
		goods_category,goods_recommend,goods_totalcount,goods_related_product,goods_file_orgname,goods_file_savname)
		VALUES (goods_NO_SEQ.NEXTVAL, #goods_name#,
		#goods_content#,#goods_readcnt#, #goods_reg_date#,#goods_color#,
		#goods_price#,#goods_size#,
		#goods_category#,#goods_recommend#,#goods_totalcount#,#goods_related_product#,#goods_file_orgname#,#goods_file_savname#)
	</insert>

	<update id="updateFile" parameterClass="ad_goods">
		UPDATE GOODS SET GOODS_FILE_ORGNAME = #goods_file_orgname#
		,GOODS_FILE_SAVNAME = #goods_file_savname#
		<include refid="where-no" />
	</update>

	<update id="updateReadcnt" parameterClass="ad_goods">
		UPDATE GOODS SET GOODS_READCNT = GOODS_READCNT + 1
		<include refid="where-no" />
	</update>

	<update id="updateGoods" parameterClass="ad_goods">
		UPDATE Goods SET goods_name=#goods_name#,
		goods_content=#goods_content#,
		goods_color=#goods_color#,
		goods_price=#goods_price#,
		goods_size=#goods_size#,
		goods_category=#goods_category#,
		goods_totalcount=#goods_totalcount#,
		goods_related_product=#goods_related_product#,
		goods_file_orgname=#goods_file_orgname#,
		goods_file_savname=#goods_file_savname#
		<include refid="where-no" />
	</update>


	<delete id="deleteGoods" parameterClass="ad_goods">
		DELETE FROM GOODS
		<include refid="where-no" />
	</delete>







	<!-- 관리자 공지사항 SQL************************************************************************************************************* -->
	<typeAlias alias="ANnotice" type="admin.notice.VO.NoticeVO" />


	<resultMap id="NoticeRes" class="ANnotice">
		<result property="notice_no" column="notice_no" />
		<result property="notice_state" column="notice_state" />
		<result property="notice_writer" column="notice_writer" />
		<result property="notice_subject" column="notice_subject" />
		<result property="notice_content" column="notice_content" />
		<result property="notice_file_orgname" column="notice_file_orgname" />
		<result property="notice_file_savname" column="notice_file_savname" />
	</resultMap>

	<sql id="ANselect-all">
		SELECT * FROM NOTICE
	</sql>

	<!-- 공통으로 사용할 where-no 절 정의 -->
	<sql id="ANwhere-no">
		WHERE notice_no = #notice_no#
	</sql>

	<select id="ANselectAll" resultMap="NoticeRes"
		parameterClass="int">
		<include refid="ANselect-all" />

	</select>

	<select id="ANselectOne" resultMap="NoticeRes"
		parameterClass="int">
		<include refid="ANselect-all" />
		<include refid="ANwhere-no" />
	</select>

	<select id="ANselectLastNo" resultClass="ANnotice"
		parameterClass="int">
		SELECT max(notice_no) as notice_no FROM NOTICE
	</select>


	
	
	
	<insert id="insertNotice" parameterClass="ANnotice">
		INSERT INTO
		NOTICE(notice_no,notice_state,notice_writer,notice_subject,notice_content,notice_file_orgname,notice_file_savname)
		VALUES
		(notice_NO_SEQ.NEXTVAL,#notice_state#,#notice_writer#,#notice_subject#,#notice_content#,#notice_file_orgname#,#notice_file_savname#)
	</insert>


	<update id="ANupdateFile" parameterClass="ANnotice">
		UPDATE NOTICE SET NOTICE_FILE_ORGNAME = #notice_file_orgname#
		,NOTICE_FILE_SAVNAME = #notice_file_savname#
		<include refid="ANwhere-no" />
	</update>
	
	<update id="updateNotice" parameterClass="ANnotice">
		UPDATE Notice SET notice_writer=#notice_writer# , notice_subject=#notice_subject# ,notice_content=#notice_content#
		<include refid="ANwhere-no" />
	</update>
	
	<delete id="deleteNotice" parameterClass="ANnotice">
		DELETE FROM NOTICE
		<include refid="ANwhere-no" />
	</delete>

	


</sqlMap>